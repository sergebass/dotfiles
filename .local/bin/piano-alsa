#!/bin/sh

echo "Killing any running fluidsynth instances..."
pkill fluidsynth
sleep 1

echo "Launching fluidsynth MIDI synthesizer..."
# Note that hardware ALSA devices are preferred for lower latency (choose device name starting with "hw:").
# To list all available ALSA devices: `aplay -L`
/usr/bin/fluidsynth --audio-driver alsa -o audio.alsa.device=hw:CARD=Device,DEV=0 -c 2 -z 128 --midi-driver alsa_seq --server --no-shell --gain 1 --reverb on --chorus on --sample-rate 48000 /usr/share/sounds/sf2/FluidR3_GM.sf2 &

echo "Waiting a bit until fluidsynth is up and running..."
sleep 5

echo "Connecting Keystation MIDI keyboard to fluidsynth MIDI synthesizer..."
aconnect -l
aconnect "USB Keystation:0" "FLUID Synth:0"

echo "Should be connected now. Try playing something..."
